# 协程

分有栈和无栈，用这个东西主要是引入异步的机制。

有栈协程的内存栈分配在线程的栈上，所以用的时候肯定要保证线程的那个栈的空间还在。这个机制可以由编译器控制，但是分配出来的大小应该是编译器定死的，可能太大也可能太小。

无栈协程的栈分配在线程的堆上，和线程的栈是分离的，应该是创建的时候动态分配的内存会占据时间。无栈协程这样看来是对编译器透明的，因此可以在库上做实现。

不同语言实现的机制不同，cpp 20 引入了协程，只是引入了很简单的协程语义，貌似也没保证是有栈无栈的。库实现应该能针对暴露的语言接口进行有栈无栈的实现。
